<%- include('header'); -%>
<div class="container-fluid">
  <div class="row" style="margin-top: 15px;">
    <div class="col=12">
      <h4>
        Total Posts: <span class="badge bg-secondary"><%= totalPosts %></span>
      </h4>
      <table class="table table-striped">
        <tr>
          <td><a href="?sortColumn=name" title="Sort by Name">Name</a></td>
          <td>Image</td>
          <td>Description</td>
          <td><a href="?sortColumn=dateLastEdited" title="Sort by Date Last Edited">Last Date Edited</a></td>
        </tr>

        <% posts.forEach(function(post) { %>
        <tr>
          <td><%= post.name %></td>
          <td><%= post.image %></td>
          <td><%= post.description %></td>
          <td><%= moment(post.dateLastEdited).format('DD.MM.YYYY'); %></td>
        </tr>
        <% }); %>
      </table>

      <% if (page > 0) { %>
      <nav aria-label="Page navigation example">
        <ul class="pagination float-end">
          <% if (current == 1) { %>
          <li class="page-item disabled"><a class="page-link">First</a></li>
          <% } else { %>
          <li class="page-item"><a class="page-link" href="?p=1">First</a></li>
          <% } %> <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
          <% if (i !== 1) { %>
          <li class="page-item disabled"><a class="page-link">...</a></li>
          <% } %> <% for (; i <= (Number(current) + 4) && i <= page; i++) { %>
          <% if (i == current) { %>
          <li class="page-item active"><a class="page-link"><%= i %></a></li>
          <% } else { %>
          <li class="page-item">
            <a class="page-link" href="?p=<%= i %>"><%= i %></a>
          </li>
          <% } %> <% if (i == Number(current) + 4 && i < page) { %>
          <li class="page-item disabled"><a class="page-link">...</a></li>
          <% } %> <% } %> <% if (current == page) { %>
          <li class="page-item disabled"><a class="page-link">Last</a></li>
          <% } else { %>
          <li class="page-item">
            <a class="page-link" href="?p=<%= page %>">Last</a>
          </li>
          <% } %>
        </ul>
      </nav>
    </div>
  </div>
</div>
<% } %> <%- include('footer'); -%>
